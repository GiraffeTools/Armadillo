{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  {% include 'shared/head.html' %}
  <!-- <script src="{% static "js/aframe.min.js" %}"></script> -->
  <script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
  <!-- <script src="{% static "js/aframe-ar.js" %}"></script> -->
  <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>

  <script src="{% static "js/jquery-3.3.1.min.js" %}"></script>

  <link rel="stylesheet" type="text/css" href="{% static "css/armadillo.css" %}">

</head>
<body class=index>
  <div class="container-fluid header">
    {% include 'shared/nav.html' %}
  </div>



  <aside class="left-sidebar" style="width:20%; background-color: white;">
		<nav class="nav">
      <img src='/neurovault/{{ image_id }}/qr' width="90%" height="90%"/>
		</nav>
    <p><h2>Armadillo</h2></p>
	</aside>


  <script>
    AFRAME.registerComponent('model-overrider', {
      init: function() {
        console.log("hello")
        this.el.addEventListener('model-loaded', function(e) {
          var model = e.detail.model;
          model.traverse(function(o) {
            if (o instanceof THREE.Mesh) {
              // modify o.material or o.geometry here.
              o.material.vertexColors = THREE.VertexColors
            }
          });
        });
      }
    });
  </script>



  <div>

    <!-- {{surface_left_file}} -->
    <!-- {{surface_right_file}} -->
  </div>
  <!-- <div> -->
    <a-scene embedded arjs='trackingMethod: best; debugUIEnabled:{{settings.DEBUG}}'>
      <a-assets>
        <a-asset-item id="rh-model" src="/neurovault/{{ image_id }}/models/right" crossOrigin="anonymous"></a-asset-item>
        <a-asset-item id="lh-model" src="/neurovault/{{ image_id }}/models/left" crossOrigin="anonymous"></a-asset-item>
      </a-assets>
      <a-anchor hit-testing-enabled='true' model-overrider>
      <a-collada-model src="#rh-model"  position="0 0 0" scale="0.01 0.01 0.01" rotation="0 180 0">
        <a-animation attribute="rotation" to="0 180 360" dur="5000" easing='linear' repeat="indefinite"></a-animation>
      </a-collada-model>
      <a-collada-model src="#lh-model"  position="0 0 0" scale="0.01 0.01 0.01" rotation="0 180 0" material='opacity: 0.5;'>
        <a-animation attribute="rotation" to="0 180 360" dur="5000" easing='linear' repeat="indefinite"></a-animation>
      </a-collada-model>
      </a-anchor>
      <!-- <a-marker-camera type='pattern' url="{% static "img/patt/pattern-marker.patt" %}"></a-marker-camera> -->
      <a-marker-camera type='pattern' url="https://raw.githubusercontent.com/vettorazi/aframe-gltf-models/master/markerv6.patt"></a-marker-camera>
      <!-- <a-marker type='pattern' url="{% static "img/patt/pattern-marker.patt" %}"></a-marker> -->
      <!-- <a-camera-static/> -->
    </a-scene>


    <div class="container-fluid marker-container">
    </div>
  <!-- </div> -->

  {% include 'shared/footer.html' %}


  <script>
  $('.toggle-sidebar .toggle-bar button').click(function() {
		$('.left-sidebar, .header, main, .main .container').toggleClass('extended');
		$('.auth').css({'display' : 'none'});
	});


	$('.left-sidebar .toggle-sidebar .setting button').click(function() {
		$('.auth').toggle();
	});

$('.toolbar .btn').on("click", function() {
  $('.toggle-bar').toggleClass('bar-toggle');
});

  </script>
  </body>
{% include 'shared/analytics.html' %}

</html>
